import { jsx } from "react/jsx-runtime";
import jsesc from "jsesc";
import { useRouter } from "./useRouter.js";
function ScriptOnce({
  children,
  log,
  sync
}) {
  const router = useRouter();
  if (typeof document !== "undefined") {
    return null;
  }
  if (!sync) {
    router.injectScript(children, { logScript: log });
    return null;
  }
  return /* @__PURE__ */ jsx(
    "script",
    {
      className: "tsr-once",
      dangerouslySetInnerHTML: {
        __html: [
          children,
          (log ?? true) && process.env.NODE_ENV === "development" ? `console.info(\`Injected From Server:
${jsesc(children.toString(), { quotes: "backtick" })}\`)` : "",
          'if (typeof __TSR__ !== "undefined") __TSR__.cleanScripts()'
        ].filter(Boolean).join("\n")
      }
    }
  );
}
export {
  ScriptOnce
};
//# sourceMappingURL=ScriptOnce.js.map
